<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>My Forever Valentine ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
    /* --- RESET & BASICS --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
        height: 100vh;
        height: 100dvh;
        /* Deep Romantic Red Gradient */
        background: radial-gradient(circle at center, #880e4f 0%, #1a001a 100%);
        font-family: 'Nunito', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        color: white;
    }

    /* --- BACKGROUND PARTICLES --- */
    #bg-container {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none; z-index: 0;
    }
    .heart-bg {
        position: absolute; opacity: 0.5;
        animation: floatUp 10s linear infinite;
        font-size: 20px;
        color: #ff4081;
        text-shadow: 0 0 5px #ff80ab;
    }
    @keyframes floatUp {
        0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
        50% { opacity: 0.8; }
        100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
    }

    /* --- MAIN CARD --- */
    .container {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px; 
        border-radius: 20px;
        width: 95%;
        max-width: 420px;
        /* Fixed height to ensure layout stays stable */
        height: 90vh; 
        display: flex;
        flex-direction: column;
        box-shadow: 0 0 60px rgba(255, 0, 80, 0.4);
        text-align: center;
        position: relative;
        z-index: 10;
        border: 4px solid #d81b60;
    }

    h1 {
        font-family: 'Dancing Script', cursive;
        color: #c2185b; 
        margin: 5px 0 10px 0;
        font-size: 36px;
        line-height: 1.2;
        flex-shrink: 0; /* Prevents title from squishing */
    }

    .subtitle {
        font-size: 14px;
        color: #880e4f;
        margin-bottom: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-bottom: 1px solid #ff80ab;
        padding-bottom: 8px;
        display: inline-block;
        flex-shrink: 0;
    }

    /* --- THE FIX: FIXED HEIGHT FOR LETTER AREA --- */
    .letter-area {
        /* This fixed height forces the scrollbar to appear */
        height: 55vh; 
        background: #fff0f5; 
        border: 1px solid #f8bbd0;
        border-radius: 10px;
        padding: 15px;
        text-align: left;
        font-size: 15px;
        color: #4a001e;
        line-height: 1.7; 
        white-space: pre-wrap; 
        overflow-y: auto; /* Enables scrolling */
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        margin-bottom: 15px;
    }
    
    .letter-area::-webkit-scrollbar { width: 5px; }
    .letter-area::-webkit-scrollbar-thumb { background: #d81b60; border-radius: 10px; }

    /* --- BUTTONS --- */
    .btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
        width: 100%;
        margin-top: auto; /* Pushes buttons to bottom */
        margin-bottom: 5px;
    }

    button {
        padding: 14px 20px;
        border: none;
        border-radius: 50px;
        font-size: 16px;
        font-weight: 800;
        cursor: pointer;
        transition: transform 0.2s;
        width: 100%;
        -webkit-tap-highlight-color: transparent;
    }
    
    button:active { transform: scale(0.95); }

    #startBtn {
        background: linear-gradient(to right, #d81b60, #ff4081);
        color: #fff;
        box-shadow: 0 5px 20px rgba(216, 27, 96, 0.4);
        margin-top: auto; 
        margin-bottom: 30px;
    }

    #yesBtn {
        background: #00c853; 
        color: white;
        box-shadow: 0 4px 15px rgba(0, 200, 83, 0.3);
    }

    #cryBtn {
        background: #ffeb3b; 
        color: #bf360c;
        box-shadow: 0 4px 15px rgba(255, 235, 59, 0.4);
    }

    /* Wrapper for the hidden content to ensure flex layout works */
    #letterView {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .hidden { display: none !important; }
    .fade-in { animation: fadeIn 2s ease-in; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

</style>
</head>
<body>

<iframe id="music" allow="autoplay" style="display:none"></iframe>
<div id="bg-container"></div>

<div class="container">
    <h1 id="mainTitle">To My Sejal... ‚ù§Ô∏è</h1>
    
    <div id="introView" style="display: flex; flex-direction: column; height: 100%;">
        <div style="font-size:60px; margin: 40px 0;">üíå</div>
        <p style="color:#880e4f; font-size: 18px; margin-bottom: 20px;">
            I have written something for you.<br>
            Something about us.<br>
            Something about forever.
        </p>
        <button id="startBtn">Read The Letter ‚ú®</button>
    </div>

    <div id="letterView" class="hidden">
        <div>
            <div class="subtitle">7 Days to Forever üíç</div>
        </div>
        
        <div class="letter-area" id="typingText"></div>

        <div class="btn-group">
            <button id="yesBtn">I'm Yours, Viku ‚ù§Ô∏è</button>
            <button id="cryBtn">Happily Crying üò≠</button>
        </div>
    </div>
</div>

<script>
// --- ELEMENTS ---
const startBtn = document.getElementById("startBtn");
const introView = document.getElementById("introView");
const letterView = document.getElementById("letterView");
const typingText = document.getElementById("typingText");
const yesBtn = document.getElementById("yesBtn");
const cryBtn = document.getElementById("cryBtn");
const musicFrame = document.getElementById("music");

// --- THE LETTER ---
const message = 
`My Dearest Seju,

Happy Valentine's Day. üåπ

I was looking at the calendar today.
Today is Feb 14th.
Next Saturday is Feb 21st.
Exactly 7 days.
Just 168 hours left until you officially become mine forever.

I‚Äôve been thinking about our journey.
Do you remember where we started?
From those first nervous messages to our "Sunflower & Chai" dates. üåª‚òï
We have had exactly 48 Dates together.
48 times I looked at you and thought, "Yes, she is the one."

This last week, I tried to make you feel special digitally.
I sent you a Rose üåπ, I Proposed (again) üíç, I sent Chocolates üç´, a Teddy üß∏, a Promise üìú, a Hug ü´Ç, and yesterday, a Kiss üíã.
7 Days. 7 Websites.
Just to see that smile on your face while you stress about the wedding prep.

But all of that was just a trailer.
The real movie starts in 7 days in Chittorgarh. üè∞

Start packing your bags,hone wali Mrs Sethiya.
Pack your anger (which I will handle),
Pack your smiles (which are my profit),
And pack your dreams (which we will build together).

I promise you, our future will be more beautiful than any code I can write.

Safar khoobsurat tha, par manzil aur bhi haseen hogi...
Ab bas 7 din aur, fir tu hamesha ke liye meri hogi. ‚ù§Ô∏è

I love you, Seju.
See you at the Mandap.

Yours,
Viku.`;

const messageArray = Array.from(message);

// --- BACKGROUND ---
function createBg() {
    const container = document.getElementById('bg-container');
    if (!container) return;
    const el = document.createElement('div');
    el.classList.add('heart-bg');
    el.innerHTML = Math.random() > 0.5 ? '‚ù§Ô∏è' : '‚ú®';
    el.style.left = Math.random() * 100 + 'vw';
    el.style.animationDuration = (Math.random() * 5 + 5) + 's';
    el.style.fontSize = (Math.random() * 20 + 10) + 'px';
    container.appendChild(el);
    setTimeout(() => { el.remove(); }, 8000);
}
setInterval(createBg, 300);

// --- TYPING ANIMATION ---
let charIndex = 0;
function typeEffect() {
    if (charIndex < messageArray.length) {
        typingText.textContent += messageArray[charIndex];
        charIndex++;
        
        // Auto-scroll ONLY if user is near bottom to avoid annoying jumps
        // Actually, for this specific request, forcing scroll is usually better 
        // so she sees the new text appearing.
        typingText.scrollTop = typingText.scrollHeight; 
        
        setTimeout(typeEffect, 30); 
    }
}

// --- START ACTION ---
startBtn.onclick = () => {
    introView.style.display = "none";
    letterView.classList.remove("hidden");
    letterView.classList.add("fade-in");
    
    if (musicFrame) musicFrame.src = "https://www.youtube.com/embed/5qap5aO4i9A?autoplay=1&loop=1"; 
    
    setTimeout(typeEffect, 500);
};

// --- FINALE ---
function triggerFireworks() {
    document.querySelector('.container').innerHTML = `
        <div class="fade-in">
            <h1 style="font-size: 40px; color: #d81b60; margin-top: 50px;">SHE SAID YES! ‚ù§Ô∏è</h1>
            <p style="font-size: 20px; margin: 30px 0; color: #4a001e; font-weight: bold;">
                The Countdown Ends.<br>
                The Forever Begins.<br><br>
                See you on Feb 21st! üíç
            </p>
            <div style="font-size: 80px; margin-top: 20px;">ü§µüë∞</div>
        </div>
    `;

    var duration = 10 * 1000;
    var animationEnd = Date.now() + duration;
    var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
    }

    var interval = setInterval(function() {
        var timeLeft = animationEnd - Date.now();
        if (timeLeft <= 0) return clearInterval(interval);
        var particleCount = 100 * (timeLeft / duration);
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
    }, 250);
}

yesBtn.onclick = triggerFireworks;
cryBtn.onclick = triggerFireworks;

</script>
</body>
</html>
